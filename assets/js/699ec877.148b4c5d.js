"use strict";(self.webpackChunk_teamhanko_docs=self.webpackChunk_teamhanko_docs||[]).push([[546],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),u=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return o.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=u(n),h=r,m=p["".concat(l,".").concat(h)]||p[h]||d[h]||a;return n?o.createElement(m,s(s({ref:t},c),{},{components:n})):o.createElement(m,s({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=p;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,s[1]=i;for(var u=2;u<a;u++)s[u]=n[u];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(7294),r=n(6010);const a="tabItem_Ymn6";function s(e){let{children:t,hidden:n,className:s}=e;return o.createElement("div",{role:"tabpanel",className:(0,r.Z)(a,s),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>N});var o=n(7462),r=n(7294),a=n(6010),s=n(2466),i=n(6775),l=n(1980),u=n(7392),c=n(12);function d(e){return function(e){return r.Children.map(e,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((e=>{let{props:{value:t,label:n,attributes:o,default:r}}=e;return{value:t,label:n,attributes:o,default:r}}))}function p(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??d(n);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const o=(0,i.k6)(),a=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(a),(0,r.useCallback)((e=>{if(!a)return;const t=new URLSearchParams(o.location.search);t.set(a,e),o.replace({...o.location,search:t.toString()})}),[a,o])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,a=p(e),[s,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const o=n.find((e=>e.default))??n[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:a}))),[l,u]=m({queryString:n,groupId:o}),[d,f]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,a]=(0,c.Nk)(n);return[o,(0,r.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:o}),k=(()=>{const e=l??d;return h({value:e,tabValues:a})?e:null})();(0,r.useLayoutEffect)((()=>{k&&i(k)}),[k]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),f(e)}),[u,f,a]),tabValues:a}}var k=n(2389);const b="tabList__CuJ",g="tabItem_LNqP";function v(e){let{className:t,block:n,selectedValue:i,selectValue:l,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.o5)(),p=e=>{const t=e.currentTarget,n=c.indexOf(t),o=u[n].value;o!==i&&(d(t),l(o))},h=e=>{var t;let n=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}null==(t=n)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:s}=e;return r.createElement("li",(0,o.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>c.push(e),onKeyDown:h,onClick:p},s,{className:(0,a.Z)("tabs__item",g,null==s?void 0:s.className,{"tabs__item--active":i===t})}),n??t)})))}function y(e){let{lazy:t,children:n,selectedValue:o}=e;if(n=Array.isArray(n)?n:[n],t){const e=n.find((e=>e.props.value===o));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},n.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==o}))))}function w(e){const t=f(e);return r.createElement("div",{className:(0,a.Z)("tabs-container",b)},r.createElement(v,(0,o.Z)({},e,t)),r.createElement(y,(0,o.Z)({},e,t)))}function N(e){const t=(0,k.Z)();return r.createElement(w,(0,o.Z)({key:String(t)},e))}},3651:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var o=n(7462),r=(n(7294),n(3905));n(4866),n(5162);const a={title:"Fresh + Hanko",sidebar_label:"Fresh",keywords:["fresh"],sidebar_custom_props:{docCardIconName:"fresh"}},s="Fresh",i={unversionedId:"guides/fresh",id:"guides/fresh",title:"Fresh + Hanko",description:"In this guide you will learn how to use the",source:"@site/docs/guides/fresh.mdx",sourceDirName:"guides",slug:"/guides/fresh",permalink:"/guides/fresh",draft:!1,tags:[],version:"current",frontMatter:{title:"Fresh + Hanko",sidebar_label:"Fresh",keywords:["fresh"],sidebar_custom_props:{docCardIconName:"fresh"}},sidebar:"docs",previous:{title:"Nuxt",permalink:"/guides/nuxt"},next:{title:"Frontend guides",permalink:"/guides/frontend"}},l={},u=[{value:"Add <code>&lt;hanko-auth&gt;</code> component",id:"add-hanko-auth-component",level:2},{value:"Add <code>&lt;hanko-events&gt;</code> component",id:"add-hanko-events-component",level:2},{value:"Add <code>&lt;hanko-profile&gt;</code> component",id:"hanko-profile",level:2},{value:"Implement logout",id:"implement-logout",level:2},{value:"Customize component styles",id:"customize-component-styles",level:2},{value:"Authenticate backend requests",id:"authenticate-backend-requests",level:2}],c={toc:u};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"fresh"},"Fresh"),(0,r.kt)("p",null,"In this guide you will learn how to use the\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/teamhanko/hanko/blob/main/frontend/elements/README.md"},"hanko-elements")," web components\nwith your Fresh application."),(0,r.kt)("h2",{id:"add-hanko-auth-component"},"Add ",(0,r.kt)("inlineCode",{parentName:"h2"},"<hanko-auth>")," component"),(0,r.kt)("p",null,"To provide a login interface in your app, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"<hanko-auth>")," web component. Due to an\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/teamhanko/hanko/issues/641"},"issue")," in Fresh, we're using a browser script to load the web elements.\nCall it with the URL of the Hanko API as an argument to register the ",(0,r.kt)("inlineCode",{parentName:"p"},"<hanko-auth>")," element with\nthe browser's ",(0,r.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/de/docs/Web/API/CustomElementRegistry"},(0,r.kt)("inlineCode",{parentName:"a"},"CustomElementRegistry")),"."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"If you are using ",(0,r.kt)("a",{parentName:"p",href:"https://cloud.hanko.io"},"Hanko Cloud"),", you can find the API URL on your project dashboard.\nIf you are self-hosting you need to provide the URL of your running Hanko backend.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Login.tsx" showLineNumbers',title:'"Login.tsx"',showLineNumbers:!0},"const endpoint = \"HANKO_API_URL\";\n\nconst code = `\n  import { register } from 'https://esm.sh/@teamhanko/hanko-elements@0.5.5-beta';\n\n  register('${endpoint}', { shadow: true });\n  document.addEventListener('hankoAuthSuccess', (event) => {\n    document.location.href = '/protected';\n  });\n`;\n\nexport default function Login() {\n  return (\n    <div class=\"auth-container\">\n      <hanko-auth api={endpoint}></hanko-auth>\n      <script type=\"module\">\n        {code}\n      <\/script>\n    </div>\n  );\n}\n")),(0,r.kt)("h2",{id:"add-hanko-events-component"},"Add ",(0,r.kt)("inlineCode",{parentName:"h2"},"<hanko-events>")," component"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"<hanko-events>")," component provides a convenient way to subscribe to specific\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/teamhanko/hanko/blob/main/frontend/elements/README.md#events"},"events")," without displaying any UI elements.\nThe other hanko-elements will also dispatch these events."),(0,r.kt)("p",null,"Unfortunately, in the current state of Fresh, there is no added benefit on using because, you cannot leverage the framework event system\nto handle the dispatched events."),(0,r.kt)("h2",{id:"hanko-profile"},"Add ",(0,r.kt)("inlineCode",{parentName:"h2"},"<hanko-profile>")," component"),(0,r.kt)("p",null,"To provide a page where users can manage their email addresses, password and passkeys, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"<hanko-profile>")," web\ncomponent. Just as with the ",(0,r.kt)("inlineCode",{parentName:"p"},"<hanko-auth>")," component, import the hanko elements via a native script."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="HankoProfile.tsx" showLineNumbers',title:'"HankoProfile.tsx"',showLineNumbers:!0},'const endpoint = "HANKO_API_URL";\n\nconst code = `\n  import { register } from \'https://esm.sh/@teamhanko/hanko-elements@0.5.5-beta\';\n\n  register(\'${endpoint}\', { shadow: true });\n`;\n\nexport default function Profile() {\n  return (\n    <div class="profile">\n      <hanko-profile api={endpoint}></hanko-profile>\n      <script type="module">\n        {code}\n      <\/script>\n    </div>\n  );\n}\n')),(0,r.kt)("h2",{id:"implement-logout"},"Implement logout"),(0,r.kt)("p",null,"Use the Hanko client to logout. The code below use a custom event to trigger the logout:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="HankoProfile.tsx" showLineNumbers',title:'"HankoProfile.tsx"',showLineNumbers:!0},"const endpoint = \"HANKO_API_URL\";\nconst code = `\n  import { register, Hanko } from 'https://esm.sh/@teamhanko/hanko-elements@0.5.5-beta';\n\n  register('${endpoint}', { shadow: true });\n  window.addEventListener('logout', () => {\n    const hanko = new Hanko('${endpoint}');\n    hanko.user.logout()\n      .then(() => {\n        window.location.href = '/signin';\n      })\n      .catch((error) => {\n        // error handling\n      });\n  });\n`;\n\n\nexport default function Profile() {\n  const logout = () => {\n    window.dispatchEvent(new Event(\"logout\"));\n  };\n\n  return (\n    <div class=\"profile\">\n      <button class=\"logout-btn\" onClick={logout}>Logout</button>\n      <hanko-profile api={endpoint}></hanko-profile>\n      <script type=\"module\">\n        {code}\n      <\/script>\n    </div>\n  );\n}\n")),(0,r.kt)("h2",{id:"customize-component-styles"},"Customize component styles"),(0,r.kt)("p",null,"The styles of the ",(0,r.kt)("inlineCode",{parentName:"p"},"hanko-auth")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"hanko-profile")," can be customized using CSS variables and parts. See our guide\non customization ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/teamhanko/hanko/tree/main/frontend/elements#ui-customization"},"here"),"."),(0,r.kt)("h2",{id:"authenticate-backend-requests"},"Authenticate backend requests"),(0,r.kt)("p",null,"If you want to authenticate requests in your own backend, please view our ",(0,r.kt)("a",{parentName:"p",href:"/guides/backend"},"backend guide"),"."))}d.isMDXComponent=!0}}]);