"use strict";(self.webpackChunk_teamhanko_docs=self.webpackChunk_teamhanko_docs||[]).push([[503],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=s(n),m=i,h=c["".concat(p,".").concat(m)]||c[m]||d[m]||r;return n?a.createElement(h,o(o({ref:t},u),{},{components:n})):a.createElement(h,o({ref:t},u))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=c;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var s=2;s<r;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7294),i=n(6010);const r="tabItem_Ymn6";function o(e){let{children:t,hidden:n,className:o}=e;return a.createElement("div",{role:"tabpanel",className:(0,i.Z)(r,o),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>C});var a=n(7462),i=n(7294),r=n(6010),o=n(2466),l=n(6775),p=n(1980),s=n(7392),u=n(12);function d(e){return function(e){return i.Children.map(e,(e=>{if((0,i.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:i}}=e;return{value:t,label:n,attributes:a,default:i}}))}function c(e){const{values:t,children:n}=e;return(0,i.useMemo)((()=>{const e=t??d(n);return function(e){const t=(0,s.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const a=(0,l.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,p._X)(r),(0,i.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(a.location.search);t.set(r,e),a.replace({...a.location,search:t.toString()})}),[r,a])]}function k(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,r=c(e),[o,l]=(0,i.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:r}))),[p,s]=h({queryString:n,groupId:a}),[d,k]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,r]=(0,u.Nk)(n);return[a,(0,i.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:a}),f=(()=>{const e=p??d;return m({value:e,tabValues:r})?e:null})();(0,i.useLayoutEffect)((()=>{f&&l(f)}),[f]);return{selectedValue:o,selectValue:(0,i.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),s(e),k(e)}),[s,k,r]),tabValues:r}}var f=n(2389);const N="tabList__CuJ",g="tabItem_LNqP";function y(e){let{className:t,block:n,selectedValue:l,selectValue:p,tabValues:s}=e;const u=[],{blockElementScrollPositionUntilNextRender:d}=(0,o.o5)(),c=e=>{const t=e.currentTarget,n=u.indexOf(t),a=s[n].value;a!==l&&(d(t),p(a))},m=e=>{var t;let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=u.indexOf(e.currentTarget)+1;n=u[t]??u[0];break}case"ArrowLeft":{const t=u.indexOf(e.currentTarget)-1;n=u[t]??u[u.length-1];break}}null==(t=n)||t.focus()};return i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},s.map((e=>{let{value:t,label:n,attributes:o}=e;return i.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===t?0:-1,"aria-selected":l===t,key:t,ref:e=>u.push(e),onKeyDown:m,onClick:c},o,{className:(0,r.Z)("tabs__item",g,null==o?void 0:o.className,{"tabs__item--active":l===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:a}=e;if(n=Array.isArray(n)?n:[n],t){const e=n.find((e=>e.props.value===a));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return i.createElement("div",{className:"margin-top--md"},n.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function b(e){const t=k(e);return i.createElement("div",{className:(0,r.Z)("tabs-container",N)},i.createElement(y,(0,a.Z)({},e,t)),i.createElement(v,(0,a.Z)({},e,t)))}function C(e){const t=(0,f.Z)();return i.createElement(b,(0,a.Z)({key:String(t)},e))}},4964:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>p,default:()=>m,frontMatter:()=>l,metadata:()=>s,toc:()=>d});var a=n(7462),i=(n(7294),n(3905)),r=n(4866),o=n(5162);const l={title:"Login with Apple",sidebar_label:"Apple",keywords:["social login","apple","siwa"],sidebar_custom_props:{docCardIconName:"apple-dark"}},p="Login with Apple",s={unversionedId:"guides/social/apple",id:"guides/social/apple",title:"Login with Apple",description:"To enable Apple login for your project, you need to",source:"@site/docs/guides/social/apple.mdx",sourceDirName:"guides/social",slug:"/guides/social/apple",permalink:"/guides/social/apple",draft:!1,tags:[],version:"current",frontMatter:{title:"Login with Apple",sidebar_label:"Apple",keywords:["social login","apple","siwa"],sidebar_custom_props:{docCardIconName:"apple-dark"}},sidebar:"docs",previous:{title:"Social Login",permalink:"/guides/social/"},next:{title:"GitHub",permalink:"/guides/social/github"}},u={},d=[{value:"Access your Apple Developer account",id:"access-your-apple-developer-account",level:2},{value:"Register an App ID",id:"register-an-app-id",level:2},{value:"Register a Services ID",id:"register-service",level:2},{value:"Get your provider redirect URL",id:"redirect-url",level:2},{value:"Configure your Services ID",id:"configure-service",level:2},{value:"Create Key and download Key file",id:"create-key-and-download-key-file",level:2},{value:"Generate a client secret",id:"generate-secret",level:2},{value:"Configure Apple credentials with Hanko",id:"config-hanko",level:2},{value:"Enable login in your frontend app",id:"enable-login-in-your-frontend-app",level:2},{value:"On using Apple&#39;s private email relay service",id:"on-using-apples-private-email-relay-service",level:2},{value:"Register domains with Apple",id:"register-domains",level:3},{value:"Configure SMTP with Hanko",id:"configure-smtp",level:3}],c={toc:d};function m(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"login-with-apple"},"Login with Apple"),(0,i.kt)("p",null,"To enable Apple login for your project, you need to"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Create a ",(0,i.kt)("inlineCode",{parentName:"li"},"Sign In With Apple"),"-capable application with Apple."),(0,i.kt)("li",{parentName:"ul"},"Create your Apple credentials and configure them with Hanko."),(0,i.kt)("li",{parentName:"ul"},"Add the Hanko ",(0,i.kt)("inlineCode",{parentName:"li"},"<hanko-auth>")," web component or add the required code to your frontend using the ",(0,i.kt)("inlineCode",{parentName:"li"},"hanko-frontend-sdk"),".")),(0,i.kt)("h2",{id:"access-your-apple-developer-account"},"Access your Apple Developer account"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"To get started you need an ",(0,i.kt)("a",{parentName:"li",href:"https://developer.apple.com/help/account/get-started/about-your-developer-account"},"Apple developer account"),"."),(0,i.kt)("li",{parentName:"ul"},"Once you have an account ",(0,i.kt)("a",{parentName:"li",href:"https://developer.apple.com/help/account/get-started/sign-in-to-your-developer-account"},"sign in"),".")),(0,i.kt)("h2",{id:"register-an-app-id"},"Register an App ID"),(0,i.kt)("p",null,"Next, you need to ",(0,i.kt)("a",{parentName:"p",href:"https://developer.apple.com/help/account/manage-identifiers/register-an-app-id"},"register an App ID"),":"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"In ",(0,i.kt)("a",{parentName:"li",href:"https://developer.apple.com/account/resources"},"Certificates, Identifiers & Profiles"),", click ",(0,i.kt)("inlineCode",{parentName:"li"},"Identifiers")," in the\nsidebar, then click the add button (",(0,i.kt)("inlineCode",{parentName:"li"},"+"),") on the top left."),(0,i.kt)("li",{parentName:"ul"},"Select ",(0,i.kt)("inlineCode",{parentName:"li"},"App IDs")," from the list of options and click ",(0,i.kt)("inlineCode",{parentName:"li"},"Continue"),"."),(0,i.kt)("li",{parentName:"ul"},"Select ",(0,i.kt)("inlineCode",{parentName:"li"},"App")," as the type and click ",(0,i.kt)("inlineCode",{parentName:"li"},"Continue"),"."),(0,i.kt)("li",{parentName:"ul"},"Provide your app information:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"App ",(0,i.kt)("inlineCode",{parentName:"li"},"Description"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Bundle ID")," (Apple recommends using a reverse-domain name style string i.e., ",(0,i.kt)("inlineCode",{parentName:"li"},"com.domainname.appname"),")."))),(0,i.kt)("li",{parentName:"ul"},"In the ",(0,i.kt)("inlineCode",{parentName:"li"},"Capabilities")," tab below, check ",(0,i.kt)("inlineCode",{parentName:"li"},"Sign in with Apple"),"."),(0,i.kt)("li",{parentName:"ul"},"Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Continue"),", then review the registration information, then click ",(0,i.kt)("inlineCode",{parentName:"li"},"Register"),".")),(0,i.kt)("h2",{id:"register-service"},"Register a Services ID"),(0,i.kt)("p",null,"You also need to register a ",(0,i.kt)("inlineCode",{parentName:"p"},"Services ID"),"."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Go to ",(0,i.kt)("a",{parentName:"li",href:"https://developer.apple.com/account/resources"},"Certificates, Identifiers & Profiles"),", click ",(0,i.kt)("inlineCode",{parentName:"li"},"Identifiers")," in the\nsidebar, then click the add button (",(0,i.kt)("inlineCode",{parentName:"li"},"+"),") on the top."),(0,i.kt)("li",{parentName:"ul"},"Select ",(0,i.kt)("inlineCode",{parentName:"li"},"Services IDs")," from the list of options and click ",(0,i.kt)("inlineCode",{parentName:"li"},"Continue"),"."),(0,i.kt)("li",{parentName:"ul"},"Provide your app information:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"App ",(0,i.kt)("inlineCode",{parentName:"li"},"Description"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Bundle ID")," (must be different from the Bundle ID you chose when ",(0,i.kt)("a",{parentName:"li",href:"#register-an-app-id"},"registering the App ID"),")."))),(0,i.kt)("li",{parentName:"ul"},"Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Continue"),", then click ",(0,i.kt)("inlineCode",{parentName:"li"},"Register"),".")),(0,i.kt)("p",null,"You need the ",(0,i.kt)("inlineCode",{parentName:"p"},"Services ID")," later when ",(0,i.kt)("a",{parentName:"p",href:"#config-hanko"},"configuring your credentials with Hanko"),"."),(0,i.kt)("h2",{id:"redirect-url"},"Get your provider redirect URL"),(0,i.kt)("p",null,"When configuring your Services ID you need to provide a redirect URL that determines where the third party\nprovider redirects after a successful login. This redirect URL consists of the base URL of the Hanko API and the\n",(0,i.kt)("a",{parentName:"p",href:"http://docs.hanko.io/api/public#tag/Third-Party/operation/thirdPartyCallback"},(0,i.kt)("inlineCode",{parentName:"a"},"/thirdparty/callback"))," endpoint.\nYour Hanko API base URL, and therefore your redirect URL, depends on whether you use Hanko Cloud or chose to self-host\nthe Hanko API:"),(0,i.kt)(r.Z,{groupId:"environment",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"cloud",label:"Hanko Cloud",mdxType:"TabItem"},(0,i.kt)("p",null,"When using Hanko Cloud you can obtain your redirect URL from the Hanko Cloud Console:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Sign in to ",(0,i.kt)("a",{parentName:"li",href:"https://cloud.hanko.io"},"cloud.hanko.io"),"."),(0,i.kt)("li",{parentName:"ul"},"Select your ",(0,i.kt)("inlineCode",{parentName:"li"},"Organization"),"."),(0,i.kt)("li",{parentName:"ul"},"Select your ",(0,i.kt)("inlineCode",{parentName:"li"},"Project"),"."),(0,i.kt)("li",{parentName:"ul"},"In the left sidebar, click ",(0,i.kt)("inlineCode",{parentName:"li"},"Settings"),", then select ",(0,i.kt)("inlineCode",{parentName:"li"},"Identity providers"),"."),(0,i.kt)("li",{parentName:"ul"},"Find your redirect URL in the ",(0,i.kt)("inlineCode",{parentName:"li"},"Redirect URL")," input.")),(0,i.kt)("p",null,"You need the redirect URL for ",(0,i.kt)("a",{parentName:"p",href:"#configure-service"},"configuring your Services ID")," in the next step.")),(0,i.kt)(o.Z,{value:"self-hosted",label:"Self-hosted",mdxType:"TabItem"},(0,i.kt)("p",null,"When self-hosting your redirect URL depends on where you chose to host your Hanko API instance, i.e.\nit looks like: ",(0,i.kt)("inlineCode",{parentName:"p"},"<your_hanko_api_url>/thirdparty/callback"),"."),(0,i.kt)("p",null,"You need this redirect URL for ",(0,i.kt)("a",{parentName:"p",href:"#configure-service"},"configuring your Services ID")," and when\n",(0,i.kt)("a",{parentName:"p",href:"#config-hanko"},"configuring your Apple credentials with Hanko"),"."))),(0,i.kt)("h2",{id:"configure-service"},"Configure your Services ID"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"On ",(0,i.kt)("a",{parentName:"li",href:"https://developer.apple.com/account/resources"},"Certificates, Identifiers & Profiles"),", click ",(0,i.kt)("inlineCode",{parentName:"li"},"Identifiers")," in the\nsidebar, then select ",(0,i.kt)("inlineCode",{parentName:"li"},"Services IDs")," from the dropdown menu on the right."),(0,i.kt)("li",{parentName:"ul"},"Select the ",(0,i.kt)("inlineCode",{parentName:"li"},"Services ID")," you created in the previous step."),(0,i.kt)("li",{parentName:"ul"},"Enable ",(0,i.kt)("inlineCode",{parentName:"li"},"Sign In With Apple")," for the ",(0,i.kt)("inlineCode",{parentName:"li"},"Services ID")," by clicking the checkbox next to it."),(0,i.kt)("li",{parentName:"ul"},"Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Configure"),"."),(0,i.kt)("li",{parentName:"ul"},"Select your ",(0,i.kt)("a",{parentName:"li",href:"#register-an-app-id"},"previously registered")," ",(0,i.kt)("inlineCode",{parentName:"li"},"App ID")," as your ",(0,i.kt)("inlineCode",{parentName:"li"},"Primary App ID"),"."),(0,i.kt)("li",{parentName:"ul"},"In the shown modal, click the add button (",(0,i.kt)("inlineCode",{parentName:"li"},"+"),") next to ",(0,i.kt)("inlineCode",{parentName:"li"},"Website URLs"),"."),(0,i.kt)("li",{parentName:"ul"},"Add the ",(0,i.kt)("em",{parentName:"li"},"domain")," of your ",(0,i.kt)("a",{parentName:"li",href:"#redirect-url"},"redirect URL")," to the ",(0,i.kt)("inlineCode",{parentName:"li"},"Domains and Subdomains")," input (do not add a scheme,\ne.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"https://"),", or path information)."),(0,i.kt)("li",{parentName:"ul"},"In the ",(0,i.kt)("inlineCode",{parentName:"li"},"Return URLs")," input, enter the complete ",(0,i.kt)("a",{parentName:"li",href:"#redirect-url"},"redirect URL")," of your app which you found in the\nprevious step."),(0,i.kt)("li",{parentName:"ul"},"Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Next")," at the bottom right."),(0,i.kt)("li",{parentName:"ul"},"Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Done")," at the bottom to close the modal."),(0,i.kt)("li",{parentName:"ul"},"Back on the ",(0,i.kt)("inlineCode",{parentName:"li"},"Edit your Services ID Configuration")," view, click ",(0,i.kt)("inlineCode",{parentName:"li"},"Continue")," at the top right, then click ",(0,i.kt)("inlineCode",{parentName:"li"},"Save"),".")),(0,i.kt)("h2",{id:"create-key-and-download-key-file"},"Create Key and download Key file"),(0,i.kt)("p",null,"Next, you need to create a ",(0,i.kt)("inlineCode",{parentName:"p"},"Key")," and download a ",(0,i.kt)("inlineCode",{parentName:"p"},"Key")," file. You need this file to\ngenerate your client secret in the ",(0,i.kt)("a",{parentName:"p",href:"#generate-secret"},"next step"),"."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"On ",(0,i.kt)("a",{parentName:"li",href:"https://developer.apple.com/account/resources"},"Certificates, Identifiers & Profiles"),", click ",(0,i.kt)("inlineCode",{parentName:"li"},"Keys")," in the sidebar,\nthen click the add button (",(0,i.kt)("inlineCode",{parentName:"li"},"+"),") next to the ",(0,i.kt)("inlineCode",{parentName:"li"},"Keys")," heading."),(0,i.kt)("li",{parentName:"ul"},"Enter a ",(0,i.kt)("inlineCode",{parentName:"li"},"Key Name"),"."),(0,i.kt)("li",{parentName:"ul"},"In the options table below the ",(0,i.kt)("inlineCode",{parentName:"li"},"Key Name")," input, check ",(0,i.kt)("inlineCode",{parentName:"li"},"Sign in with Apple"),"."),(0,i.kt)("li",{parentName:"ul"},"In the same table row, click ",(0,i.kt)("inlineCode",{parentName:"li"},"Configure")," to the right."),(0,i.kt)("li",{parentName:"ul"},"In the ",(0,i.kt)("inlineCode",{parentName:"li"},"Configure Key")," view, select your ",(0,i.kt)("a",{parentName:"li",href:"#register-an-app-id"},"previously registered")," ",(0,i.kt)("inlineCode",{parentName:"li"},"App ID")," in the",(0,i.kt)("inlineCode",{parentName:"li"},"Primary App ID")," dropdown."),(0,i.kt)("li",{parentName:"ul"},"Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Save")," on the top right."),(0,i.kt)("li",{parentName:"ul"},"Back on the ",(0,i.kt)("inlineCode",{parentName:"li"},"Register a New Key")," view, click ",(0,i.kt)("inlineCode",{parentName:"li"},"Continue"),", then click ",(0,i.kt)("inlineCode",{parentName:"li"},"Register")," on the top right."),(0,i.kt)("li",{parentName:"ul"},"On the ",(0,i.kt)("inlineCode",{parentName:"li"},"Download Your Key")," view, click ",(0,i.kt)("inlineCode",{parentName:"li"},"Download")," on the top right to save the key file."),(0,i.kt)("li",{parentName:"ul"},"Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Done")," on the top right.")),(0,i.kt)("h2",{id:"generate-secret"},"Generate a client secret"),(0,i.kt)("p",null,"Sign in with Apple requires a client secret to authorize API requests. The secret must be a JSON Web\nToken (JWT) signed with the Elliptic Curve Digital Signature Algorithm (ECDSA) with the P-256 curve and the SHA-256\nhash algorithm."),(0,i.kt)("p",null,"To make secret generation as easy as possible, we provide a script that can be executed using\n",(0,i.kt)("a",{parentName:"p",href:"https://docker.com"},"Docker"),". If you do not have Docker installed, see the\n",(0,i.kt)("a",{parentName:"p",href:"https://docs.docker.com/get-docker/"},"official installation instructions"),"."),(0,i.kt)("p",null,"The script requires the following information:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"private_key"),": This is the path to the key file you downloaded in the ",(0,i.kt)("a",{parentName:"li",href:"#create-key-and-download-key-file"},"previous step"),".\nPer default the key file name should look like this: ",(0,i.kt)("inlineCode",{parentName:"li"},"AuthKey_XXXXXXXXXX.p8"),". Because we use Docker in this case, we\nwill use the path to the key file on your filesystem to mount the file into the Docker container (we'll get to this,\nsee the command below)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"team_id"),": This is the Team ID your Apple Developer account is associated with.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"See ",(0,i.kt)("a",{parentName:"li",href:"https://developer.apple.com/help/account/manage-your-team/locate-your-team-id/#:~:text=In%20the%20top%20navigation%20of,to%20view%20your%20Team%20ID."},"Locate your Team ID"),"\nin the official Apple documentation."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"services_id"),": This is ",(0,i.kt)("inlineCode",{parentName:"li"},"Services ID")," you created in the ",(0,i.kt)("a",{parentName:"li",href:"#register-a-services-id"},"Register a Services ID")," step. You\ncan always review this ID in the Apple Developer console:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"On ",(0,i.kt)("a",{parentName:"li",href:"https://developer.apple.com/account/resources"},"Certificates, Identifiers & Profiles"),", click ",(0,i.kt)("inlineCode",{parentName:"li"},"Identifiers")," in the sidebar,\nthen select ",(0,i.kt)("inlineCode",{parentName:"li"},"Services IDs")," from the dropdown menu on the right."),(0,i.kt)("li",{parentName:"ul"},"Find the relevant entry in the list (the required value is the value in the ",(0,i.kt)("inlineCode",{parentName:"li"},"Identifier")," column)."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"key_id"),": This is the ID of the private key from the ",(0,i.kt)("a",{parentName:"li",href:"#create-key-and-download-key-file"},"previous step"),".\nThe ",(0,i.kt)("inlineCode",{parentName:"li"},"XXXXXXXXXX")," part of the default ",(0,i.kt)("inlineCode",{parentName:"li"},"AuthKey_XXXXXXXXXX.p8")," filename is the key ID. You can\nalso review this ID in the Apple Developer console:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"On ",(0,i.kt)("a",{parentName:"li",href:"https://developer.apple.com/account/resources"},"Certificates, Identifiers & Profiles"),", click ",(0,i.kt)("inlineCode",{parentName:"li"},"Keys")," in the sidebar,\nthen select ",(0,i.kt)("inlineCode",{parentName:"li"},"Services IDs"),"."),(0,i.kt)("li",{parentName:"ul"},"Select your key in the list."),(0,i.kt)("li",{parentName:"ul"},"The ID can be found under ",(0,i.kt)("inlineCode",{parentName:"li"},"View Key Details")," > ",(0,i.kt)("inlineCode",{parentName:"li"},"Key ID"))))),(0,i.kt)("p",null,"As previously mentioned, we will mount the ",(0,i.kt)("inlineCode",{parentName:"p"},"private_key")," to the container by mapping the path on your filesystem to\na path on the container filesystem, e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"~/Downloads/AuthKey_XXXXXXXXXX.p8:/tmp/AuthKey_XXXXXXXXXX.p8"),".\nFrom the command line, run (replace ",(0,i.kt)("inlineCode",{parentName:"p"},"<...>")," placeholders with your data):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"docker run -v <key_file_on_host>:<key_file_in_container> ghcr.io/teamhanko/hanko siwa \\\n--private_key <key_file_in_container>  \\\n--team_id <your_team_id> \\\n--services_id <your_services_id> \\\n--key_id <your_key_id> > client_secret.txt\n")),(0,i.kt)("p",null,"The command will save the client secret in a file ",(0,i.kt)("inlineCode",{parentName:"p"},"client_secret.txt"),"."),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"Secrets expire after 6 months and must be regenerated before the expiration.")),(0,i.kt)("h2",{id:"config-hanko"},"Configure Apple credentials with Hanko"),(0,i.kt)("p",null,"Next, you need to configure your Apple credentials with Hanko. Configuration differs depending on whether you\nuse Hanko Cloud or self-host the Hanko API:"),(0,i.kt)(r.Z,{groupId:"environment",mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"cloud",label:"Hanko Cloud",mdxType:"TabItem"},(0,i.kt)("p",null,"When using Hanko Cloud, configure third party settings using the Hanko Cloud Console:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Sign in to ",(0,i.kt)("a",{parentName:"li",href:"https://cloud.hanko.io"},"cloud.hanko.io"),"."),(0,i.kt)("li",{parentName:"ul"},"Select your ",(0,i.kt)("inlineCode",{parentName:"li"},"Organization"),"."),(0,i.kt)("li",{parentName:"ul"},"Select your ",(0,i.kt)("inlineCode",{parentName:"li"},"Project"),"."),(0,i.kt)("li",{parentName:"ul"},"In the left sidebar, click ",(0,i.kt)("inlineCode",{parentName:"li"},"Settings"),", then select ",(0,i.kt)("inlineCode",{parentName:"li"},"Identity providers"),"."),(0,i.kt)("li",{parentName:"ul"},"Under ",(0,i.kt)("inlineCode",{parentName:"li"},"Identity provider settings")," configure the following:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Error redirect URL"),": This is a URL in your frontend the Hanko API redirects to if an error occurs during third\nparty sign-in. When ",(0,i.kt)("a",{parentName:"li",href:"#frontend-integration"},"using the ",(0,i.kt)("inlineCode",{parentName:"a"},"hanko-elements")," web components")," it should be the URL of the\npage that embeds the web component such that errors can be processed properly by the web component."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"Allowed redirect URL"),": This is a URL in your frontend the Hanko API is allowed to redirect to after third party\nauthentication was successful. When ",(0,i.kt)("a",{parentName:"li",href:"#frontend-integration"},"using the ",(0,i.kt)("inlineCode",{parentName:"a"},"hanko-elements")," web components"),", it should be\nthe URL of the page that embeds the web component.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},(0,i.kt)("strong",{parentName:"em"},"Note")),": supports wildcard matching through globbing:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"https://*.example.com")," will allow ",(0,i.kt)("inlineCode",{parentName:"li"},"https://foo.example.com")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"https://bar.example.com")," to be accepted."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"https://foo.example.com/*")," will match ",(0,i.kt)("inlineCode",{parentName:"li"},"https://foo.example.com/page1"),"\nand ",(0,i.kt)("inlineCode",{parentName:"li"},"https://foo.example.com/page2"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"**"),' acts as a "super"-wildcard/match-all.'))))))),(0,i.kt)("li",{parentName:"ul"},"Find and expand the ",(0,i.kt)("inlineCode",{parentName:"li"},"Apple")," provider panel in the ",(0,i.kt)("inlineCode",{parentName:"li"},"Providers")," list."),(0,i.kt)("li",{parentName:"ul"},"Enable the provider by clicking the toggle switch."),(0,i.kt)("li",{parentName:"ul"},"Enter your ",(0,i.kt)("a",{parentName:"li",href:"#register-service"},(0,i.kt)("inlineCode",{parentName:"a"},"Services ID"))," and client ",(0,i.kt)("a",{parentName:"li",href:"#generate-secret"},(0,i.kt)("inlineCode",{parentName:"a"},"Secret")),"."),(0,i.kt)("li",{parentName:"ul"},"Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Save"),"."))),(0,i.kt)(o.Z,{value:"self-hosted",label:"Self-hosted",mdxType:"TabItem"},(0,i.kt)("p",null,"When self-hosting you need to adjust your backend\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/teamhanko/hanko/blob/main/backend/config/config.yaml"},"configuration file"),". You must provide\nthe following data:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"your provider ",(0,i.kt)("a",{parentName:"li",href:"#redirect-url"},(0,i.kt)("inlineCode",{parentName:"a"},"redirect_url"))),(0,i.kt)("li",{parentName:"ul"},"your ",(0,i.kt)("inlineCode",{parentName:"li"},"client ID"),", which in this case is your ",(0,i.kt)("a",{parentName:"li",href:"#configure-service"},(0,i.kt)("inlineCode",{parentName:"a"},"Services ID"))),(0,i.kt)("li",{parentName:"ul"},"your client ",(0,i.kt)("a",{parentName:"li",href:"#generate-secret"},(0,i.kt)("inlineCode",{parentName:"a"},"secret"))),(0,i.kt)("li",{parentName:"ul"},"an ",(0,i.kt)("inlineCode",{parentName:"li"},"error_redirect_url"),": This is a URL in your frontend the Hanko API redirects to if an error occurs during third\nparty sign-in. When ",(0,i.kt)("a",{parentName:"li",href:"#frontend-integration"},"using the ",(0,i.kt)("inlineCode",{parentName:"a"},"hanko-elements")," web components"),", it should be the URL of the\npage that embeds the web component such that errors can be processed properly by the web component."),(0,i.kt)("li",{parentName:"ul"},"an ",(0,i.kt)("inlineCode",{parentName:"li"},"allowed_redirect_url"),": This is a URL in your frontend the Hanko API is allowed to redirect to after third\nparty sign-in was successful. When ",(0,i.kt)("a",{parentName:"li",href:"#frontend-integration"},"using the ",(0,i.kt)("inlineCode",{parentName:"a"},"hanko-elements")," web components"),", it should be\nthe URL of the page that embeds the web component.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},(0,i.kt)("strong",{parentName:"em"},"Note")),": supports wildcard matching through globbing:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"https://*.example.com")," will allow ",(0,i.kt)("inlineCode",{parentName:"li"},"https://foo.example.com")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"https://bar.example.com")," to be accepted."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"https://foo.example.com/*")," will match ",(0,i.kt)("inlineCode",{parentName:"li"},"https://foo.example.com/page1"),"\nand ",(0,i.kt)("inlineCode",{parentName:"li"},"https://foo.example.com/page2"),"."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"**"),' acts as a "super"-wildcard/match-all.')))))),(0,i.kt)("p",null,"Open up your configuration file and add the following:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"title=config.yaml",title:"config.yaml"},"third_party:\n  # You do not have to add this URL to the 'allowed_redirect_urls', it is automatically included when\n  # validating redirect URLs.\n  #\n  # NOTE: URLs MUST NOT have trailing slash\n  error_redirect_url: <your_error_redirect_url>\n  # NOTE: URLs in the list MUST NOT have trailing slash\n  allowed_redirect_urls:\n      - <your_allowed_redirect_url>\n  redirect_url: <your_provider_redirect_url>\n  providers:\n    apple:\n      enabled: true\n      # this is your Apple Services ID\n      client_id: <your_apple_client_id>\n      secret: <your_apple_client_secret>\n")))),(0,i.kt)("h2",{id:"enable-login-in-your-frontend-app"},"Enable login in your frontend app"),(0,i.kt)("p",null,"Frontend integration depends on whether you intend to use a pre-built UI as provided by the\n",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@teamhanko/hanko-elements"},(0,i.kt)("inlineCode",{parentName:"a"},"@teamhanko/hanko-elements"))," package or prefer building\na custom UI using the ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@teamhanko/hanko-frontend-sdk"},(0,i.kt)("inlineCode",{parentName:"a"},"@teamhanko/hanko-frontend-sdk")),"."),(0,i.kt)(r.Z,{mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"elements",label:"Hanko Elements",mdxType:"TabItem"},(0,i.kt)("p",null,"Depending on what framework your frontend uses, integrate the ",(0,i.kt)("inlineCode",{parentName:"p"},"<hanko-auth>")," web component from the ",(0,i.kt)("inlineCode",{parentName:"p"},"hanko-elements"),"\npackage according to one of our ",(0,i.kt)("a",{parentName:"p",href:"/guides/frontend"},"frontend guides"),". If everything was successful, the component should\nnow render a button for signing in with ",(0,i.kt)("inlineCode",{parentName:"p"},"Apple")," on the login view."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"Make sure to ",(0,i.kt)("a",{parentName:"p",href:"#config-hanko"},"configure")," the page the web component is embedded on as your error redirect URL\nas well as an allowed redirect URL.")),(0,i.kt)("p",null,"On successful authentication with the third party provider, the backend issues a session cookie and the web component\ncontinues the usual component flow on success. Errors that occur during third party\nprovider authentication are also picked up and displayed in the web component accordingly.")),(0,i.kt)(o.Z,{value:"sdk",label:"Hanko Frontend SDK",mdxType:"TabItem"},(0,i.kt)("p",null,"When building your own UI, you can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"@teamhanko/hanko-frontend-sdk")," to initialize third party sign in.\nCreate a ",(0,i.kt)("a",{parentName:"p",href:"https://docs.hanko.io/jsdoc/hanko-frontend-sdk/Hanko.html"},(0,i.kt)("inlineCode",{parentName:"a"},"Hanko")," client")," instance and call ",(0,i.kt)("inlineCode",{parentName:"p"},"thirdParty.auth"),"\nwith ",(0,i.kt)("inlineCode",{parentName:"p"},"apple")," as your provider and the target URL in your frontend you want to redirect to\nafter successful third party authentication (must be ",(0,i.kt)("a",{parentName:"p",href:"#config-hanko"},"configured")," as an allowed redirect URL).\nDoing so first redirects you to the third party provider, where you then will be prompted\nto authenticate and provide consent for the API to access your data."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:"showLineNumbers",showLineNumbers:!0},'import { Hanko } from "@teamhanko/hanko-frontend-sdk"\n\nconst hanko = new Hanko("<your_hanko_api_url>")\n\nasync function signInWithApple() {\n    try {\n       await hanko.thirdParty.auth("apple", "<your_redirect_url>");\n    } catch (error) {\n      // handle error\n    }\n}\n')),(0,i.kt)("p",null,"On successful authentication with the third party provider, the API redirects you to the given redirect URL. The\nURL query includes a one time token that must be exchanged for a JWT. Use the ",(0,i.kt)("inlineCode",{parentName:"p"},"token.validate"),"\nmethod on your client to validate the token:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:"showLineNumbers",showLineNumbers:!0},'import { Hanko } from "@teamhanko/hanko-frontend-sdk"\n\nconst hanko = new Hanko("<your_hanko_api_url>")\n\nasync function onLoad() {\n    try {\n       await hanko.token.validate();\n    } catch (error) {\n      // handle error\n    }\n\n    // you should now have a JWT cookie set\n}\n')),(0,i.kt)("p",null,"On success, the API issues a JWT which is then set by the SDK as a cookie (",(0,i.kt)("inlineCode",{parentName:"p"},"hanko"),"). All other SDK methods can now\nuse the cookie to make authenticated requests to the API."))),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"If you are self-hosting and your frontend application runs on a different domain than the Hanko API, make sure to"),(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"enable session token propagation via header manually by setting ",(0,i.kt)("inlineCode",{parentName:"li"},"session.enable_auth_token_header")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"true")," in your\nconfiguration, so that session cookies can be set client-side."),(0,i.kt)("li",{parentName:"ul"},"include your frontend domain in the ",(0,i.kt)("inlineCode",{parentName:"li"},"server.public.cors.allowed_origins")," in your\n",(0,i.kt)("a",{parentName:"li",href:"https://github.com/teamhanko/hanko/blob/main/backend/docs/Config.md"},"configuration"),"."))),(0,i.kt)("h2",{id:"on-using-apples-private-email-relay-service"},"On using Apple's private email relay service"),(0,i.kt)("p",null,"Sign in with Apple gives allows users to\n",(0,i.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/sign_in_with_apple/sign_in_with_apple_js/communicating_using_the_private_email_relay_service#overview"},"hide their original email address"),"\nwhen authorizing your app during the authentication flow and instead use an anonymous, automatically generated\nemail address. Emails are then routed through Apples private relay email service. In order to\n",(0,i.kt)("a",{parentName:"p",href:"https://developer.apple.com/help/account/configure-app-capabilities/configure-private-email-relay-service"},"send email messages through the relay service"),"\nto the users' personal inboxes (Hanko sends out passcodes for email verification and account\nrecovery), you'll need to register your outbound email domains. All registered domains must create Sender Policy\nFramework (SPF) DNS TXT records in order to transit Apple's private mail relay."),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("p",{parentName:"admonition"},"If a user signs up using ",(0,i.kt)("inlineCode",{parentName:"p"},"Sign in with Apple")," and chooses to hide their real email address, then the\nprivate relay address will become the primary email for the user. Should a user then choose to sign in with an email\naddress (and not via ",(0,i.kt)("inlineCode",{parentName:"p"},"Sign in with Apple"),"), then the private relay email address must be used, ",(0,i.kt)("em",{parentName:"p"},"not")," the real email\naddress associated with her Apple account.")),(0,i.kt)("h3",{id:"register-domains"},"Register domains with Apple"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"On ",(0,i.kt)("a",{parentName:"li",href:"https://developer.apple.com/account/resources"},"Certificates, Identifiers & Profiles"),", click ",(0,i.kt)("inlineCode",{parentName:"li"},"Services")," in the\nleft sidebar."),(0,i.kt)("li",{parentName:"ul"},"In the ",(0,i.kt)("inlineCode",{parentName:"li"},"Sign in with Apple for Email Communication")," panel, click ",(0,i.kt)("inlineCode",{parentName:"li"},"Configure"),"."),(0,i.kt)("li",{parentName:"ul"},"Next to the ",(0,i.kt)("inlineCode",{parentName:"li"},"Email Sources")," heading, click the add (",(0,i.kt)("inlineCode",{parentName:"li"},"+"),") button."),(0,i.kt)("li",{parentName:"ul"},"In the ",(0,i.kt)("inlineCode",{parentName:"li"},"Register your email sources")," modal, enter your ",(0,i.kt)("inlineCode",{parentName:"li"},"Domains and Subdomains")," and/or specific ",(0,i.kt)("inlineCode",{parentName:"li"},"Email Addresses"),".",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"If you use Hanko Cloud and do ",(0,i.kt)("em",{parentName:"li"},"not")," want to use a custom SMTP server, enter ",(0,i.kt)("inlineCode",{parentName:"li"},"hanko.io")," in\nthe ",(0,i.kt)("inlineCode",{parentName:"li"},"Domains and Subdomains")," input. You do not need to provide an SPF DNS record by yourself."),(0,i.kt)("li",{parentName:"ul"},"If you use Hanko Cloud and ",(0,i.kt)("em",{parentName:"li"},"do")," want to use a ",(0,i.kt)("a",{parentName:"li",href:"?environment=cloud#configure-smtp"},"custom SMTP server"),", enter your\ncustom domain in the ",(0,i.kt)("inlineCode",{parentName:"li"},"Domains and Subdomains")," input. Remember to provide an SPF DNS record for your domain in order\nto pass Apple's SPF check."))),(0,i.kt)("li",{parentName:"ul"},"Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Next"),", then click ",(0,i.kt)("inlineCode",{parentName:"li"},"Register"),"."),(0,i.kt)("li",{parentName:"ul"},"Your domains should be listed in the ",(0,i.kt)("inlineCode",{parentName:"li"},"Email Sources")," table. Emails are only relayed if the SPF check (see the ",(0,i.kt)("inlineCode",{parentName:"li"},"Status"),"\ncolumn) was successful.")),(0,i.kt)("h3",{id:"configure-smtp"},"Configure SMTP with Hanko"),(0,i.kt)(r.Z,{groupId:"environment",queryString:!0,mdxType:"Tabs"},(0,i.kt)(o.Z,{value:"cloud",label:"Hanko Cloud",mdxType:"TabItem"},(0,i.kt)("p",null,"If you use Hanko Cloud and are on a paid subscription tier you can configure your own SMTP server."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Sign in to ",(0,i.kt)("a",{parentName:"li",href:"https://cloud.hanko.io"},"cloud.hanko.io"),"."),(0,i.kt)("li",{parentName:"ul"},"Select your ",(0,i.kt)("inlineCode",{parentName:"li"},"Organization"),"."),(0,i.kt)("li",{parentName:"ul"},"Select your ",(0,i.kt)("inlineCode",{parentName:"li"},"Project"),"."),(0,i.kt)("li",{parentName:"ul"},"In the left sidebar, click ",(0,i.kt)("inlineCode",{parentName:"li"},"Settings"),", then select ",(0,i.kt)("inlineCode",{parentName:"li"},"SMTP"),"."),(0,i.kt)("li",{parentName:"ul"},"Enter your SMTP credentials and sender data.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The domain of your ",(0,i.kt)("inlineCode",{parentName:"li"},"Sender email address")," should be registered as an email source in the Apple developer\nconsole to allow communication through Apple's private relay service (see the ",(0,i.kt)("a",{parentName:"li",href:"#register-domains"},"previous step"),")."))),(0,i.kt)("li",{parentName:"ul"},"Click ",(0,i.kt)("inlineCode",{parentName:"li"},"Save"),"."))),(0,i.kt)(o.Z,{value:"self-hosted",label:"Self-hosted",mdxType:"TabItem"},(0,i.kt)("p",null,"If you are self-hosting, you need to edit your ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/teamhanko/hanko/blob/main/backend/config/config.yaml"},"configuration file"),".\nOpen the file and add the following (replace ",(0,i.kt)("inlineCode",{parentName:"p"},"<...>")," placeholders with your data):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"title=config.yaml",title:"config.yaml"},"passcode:\n  email:\n    # The sender of emails sent to users.\n    from_address: <your_from_address>\n    # The sender name of emails sent to users.\n    from_name: <your_from_name>\n  smtp:\n    host: <your_smtp_host>\n    port: <your_smtp_port> # Default: 465\n    user: <your_smtp_user>\n    password: <your_smtp_password>\n")))))}m.isMDXComponent=!0}}]);