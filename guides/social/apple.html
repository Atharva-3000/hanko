<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guides/social/apple">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Login with Apple | Hanko Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.hanko.io/img/thumbnail.jpg"><meta data-rh="true" name="twitter:image" content="https://docs.hanko.io/img/thumbnail.jpg"><meta data-rh="true" property="og:url" content="https://docs.hanko.io/guides/social/apple"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Login with Apple | Hanko Documentation"><meta data-rh="true" name="description" content="To enable Apple login for your project, you need to"><meta data-rh="true" property="og:description" content="To enable Apple login for your project, you need to"><meta data-rh="true" name="keywords" content="social login,apple,siwa"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.hanko.io/guides/social/apple"><link data-rh="true" rel="alternate" href="https://docs.hanko.io/guides/social/apple" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.hanko.io/guides/social/apple" hreflang="x-default"><script src="https://plausible.io/js/plausible.js" defer="defer" data-domain="docs.hanko.io"></script><link rel="stylesheet" href="/assets/css/styles.e596552c.css">
<link rel="preload" href="/assets/js/runtime~main.2855e3b5.js" as="script">
<link rel="preload" href="/assets/js/main.33db7b23.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Hanko Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="Hanko Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">API</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/api/public">Public</a></li><li><a class="dropdown__link" href="/api/admin">Admin</a></li></ul></div><a class="navbar__item navbar__link" target="_blank" href="/jsdoc/hanko-frontend-sdk">SDK</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/teamhanko/hanko" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" title="Visit us on GitHub!" aria-label="Visit us on GitHub!"></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/guides/fullstack">Fullstack guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Fullstack guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/guides/frontend">Frontend guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Frontend guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides/backend">Backend guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guides/mobile_guide">Mobile guide (Beta)</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/guides/social">Social Login</a><button aria-label="Toggle the collapsible sidebar category &#x27;Social Login&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/guides/social/apple">Apple</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/social/github">GitHub</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/social/google">Google</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/guides/tutorials/php">Tutorials</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/guides/social"><span itemprop="name">Social Login</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Apple</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Login with Apple</h1><p>To enable Apple login for your project, you need to</p><ul><li>Create a <code>Sign In With Apple</code>-capable application with Apple.</li><li>Create your Apple credentials and configure them with Hanko.</li><li>Add the Hanko <code>&lt;hanko-auth&gt;</code> web component or add the required code to your frontend using the <code>hanko-frontend-sdk</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="access-your-apple-developer-account">Access your Apple Developer account<a href="#access-your-apple-developer-account" class="hash-link" aria-label="Direct link to Access your Apple Developer account" title="Direct link to Access your Apple Developer account">​</a></h2><ul><li>To get started you need an <a href="https://developer.apple.com/help/account/get-started/about-your-developer-account" target="_blank" rel="noopener noreferrer">Apple developer account</a>.</li><li>Once you have an account <a href="https://developer.apple.com/help/account/get-started/sign-in-to-your-developer-account" target="_blank" rel="noopener noreferrer">sign in</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-an-app-id">Register an App ID<a href="#register-an-app-id" class="hash-link" aria-label="Direct link to Register an App ID" title="Direct link to Register an App ID">​</a></h2><p>Next, you need to <a href="https://developer.apple.com/help/account/manage-identifiers/register-an-app-id" target="_blank" rel="noopener noreferrer">register an App ID</a>:</p><ul><li>In <a href="https://developer.apple.com/account/resources" target="_blank" rel="noopener noreferrer">Certificates, Identifiers &amp; Profiles</a>, click <code>Identifiers</code> in the
sidebar, then click the add button (<code>+</code>) on the top left.</li><li>Select <code>App IDs</code> from the list of options and click <code>Continue</code>.</li><li>Select <code>App</code> as the type and click <code>Continue</code>.</li><li>Provide your app information:<ul><li>App <code>Description</code>.</li><li><code>Bundle ID</code> (Apple recommends using a reverse-domain name style string i.e., <code>com.domainname.appname</code>).</li></ul></li><li>In the <code>Capabilities</code> tab below, check <code>Sign in with Apple</code>.</li><li>Click <code>Continue</code>, then review the registration information, then click <code>Register</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-service">Register a Services ID<a href="#register-service" class="hash-link" aria-label="Direct link to Register a Services ID" title="Direct link to Register a Services ID">​</a></h2><p>You also need to register a <code>Services ID</code>.</p><ul><li>Go to <a href="https://developer.apple.com/account/resources" target="_blank" rel="noopener noreferrer">Certificates, Identifiers &amp; Profiles</a>, click <code>Identifiers</code> in the
sidebar, then click the add button (<code>+</code>) on the top.</li><li>Select <code>Services IDs</code> from the list of options and click <code>Continue</code>.</li><li>Provide your app information:<ul><li>App <code>Description</code>.</li><li><code>Bundle ID</code> (must be different from the Bundle ID you chose when <a href="#register-an-app-id">registering the App ID</a>).</li></ul></li><li>Click <code>Continue</code>, then click <code>Register</code>.</li></ul><p>You need the <code>Services ID</code> later when <a href="#config-hanko">configuring your credentials with Hanko</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="redirect-url">Get your provider redirect URL<a href="#redirect-url" class="hash-link" aria-label="Direct link to Get your provider redirect URL" title="Direct link to Get your provider redirect URL">​</a></h2><p>When configuring your Services ID you need to provide a redirect URL that determines where the third party
provider redirects after a successful login. This redirect URL consists of the base URL of the Hanko API and the
<a href="http://docs.hanko.io/api/public#tag/Third-Party/operation/thirdPartyCallback" target="_blank" rel="noopener noreferrer"><code>/thirdparty/callback</code></a> endpoint.
Your Hanko API base URL, and therefore your redirect URL, depends on whether you use Hanko Cloud or chose to self-host
the Hanko API:</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Hanko Cloud</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Self-hosted</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>When using Hanko Cloud you can obtain your redirect URL from the Hanko Cloud Console:</p><ul><li>Sign in to <a href="https://cloud.hanko.io" target="_blank" rel="noopener noreferrer">cloud.hanko.io</a>.</li><li>Select your <code>Organization</code>.</li><li>Select your <code>Project</code>.</li><li>In the left sidebar, click <code>Settings</code>, then select <code>Identity providers</code>.</li><li>Find your redirect URL in the <code>Redirect URL</code> input.</li></ul><p>You need the redirect URL for <a href="#configure-service">configuring your Services ID</a> in the next step.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>When self-hosting your redirect URL depends on where you chose to host your Hanko API instance, i.e.
it looks like: <code>&lt;your_hanko_api_url&gt;/thirdparty/callback</code>.</p><p>You need this redirect URL for <a href="#configure-service">configuring your Services ID</a> and when
<a href="#config-hanko">configuring your Apple credentials with Hanko</a>.</p></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configure-service">Configure your Services ID<a href="#configure-service" class="hash-link" aria-label="Direct link to Configure your Services ID" title="Direct link to Configure your Services ID">​</a></h2><ul><li>On <a href="https://developer.apple.com/account/resources" target="_blank" rel="noopener noreferrer">Certificates, Identifiers &amp; Profiles</a>, click <code>Identifiers</code> in the
sidebar, then select <code>Services IDs</code> from the dropdown menu on the right.</li><li>Select the <code>Services ID</code> you created in the previous step.</li><li>Enable <code>Sign In With Apple</code> for the <code>Services ID</code> by clicking the checkbox next to it.</li><li>Click <code>Configure</code>.</li><li>Select your <a href="#register-an-app-id">previously registered</a> <code>App ID</code> as your <code>Primary App ID</code>.</li><li>In the shown modal, click the add button (<code>+</code>) next to <code>Website URLs</code>.</li><li>Add the <em>domain</em> of your <a href="#redirect-url">redirect URL</a> to the <code>Domains and Subdomains</code> input (do not add a scheme,
e.g. <code>https://</code>, or path information).</li><li>In the <code>Return URLs</code> input, enter the complete <a href="#redirect-url">redirect URL</a> of your app which you found in the
previous step.</li><li>Click <code>Next</code> at the bottom right.</li><li>Click <code>Done</code> at the bottom to close the modal.</li><li>Back on the <code>Edit your Services ID Configuration</code> view, click <code>Continue</code> at the top right, then click <code>Save</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-key-and-download-key-file">Create Key and download Key file<a href="#create-key-and-download-key-file" class="hash-link" aria-label="Direct link to Create Key and download Key file" title="Direct link to Create Key and download Key file">​</a></h2><p>Next, you need to create a <code>Key</code> and download a <code>Key</code> file. You need this file to
generate your client secret in the <a href="#generate-secret">next step</a>.</p><ul><li>On <a href="https://developer.apple.com/account/resources" target="_blank" rel="noopener noreferrer">Certificates, Identifiers &amp; Profiles</a>, click <code>Keys</code> in the sidebar,
then click the add button (<code>+</code>) next to the <code>Keys</code> heading.</li><li>Enter a <code>Key Name</code>.</li><li>In the options table below the <code>Key Name</code> input, check <code>Sign in with Apple</code>.</li><li>In the same table row, click <code>Configure</code> to the right.</li><li>In the <code>Configure Key</code> view, select your <a href="#register-an-app-id">previously registered</a> <code>App ID</code> in the<code>Primary App ID</code> dropdown.</li><li>Click <code>Save</code> on the top right.</li><li>Back on the <code>Register a New Key</code> view, click <code>Continue</code>, then click <code>Register</code> on the top right.</li><li>On the <code>Download Your Key</code> view, click <code>Download</code> on the top right to save the key file.</li><li>Click <code>Done</code> on the top right.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="generate-secret">Generate a client secret<a href="#generate-secret" class="hash-link" aria-label="Direct link to Generate a client secret" title="Direct link to Generate a client secret">​</a></h2><p>Sign in with Apple requires a client secret to authorize API requests. The secret must be a JSON Web
Token (JWT) signed with the Elliptic Curve Digital Signature Algorithm (ECDSA) with the P-256 curve and the SHA-256
hash algorithm.</p><p>To make secret generation as easy as possible, we provide a script that can be executed using
<a href="https://docker.com" target="_blank" rel="noopener noreferrer">Docker</a>. If you do not have Docker installed, see the
<a href="https://docs.docker.com/get-docker/" target="_blank" rel="noopener noreferrer">official installation instructions</a>.</p><p>The script requires the following information:</p><ul><li><code>private_key</code>: This is the path to the key file you downloaded in the <a href="#create-key-and-download-key-file">previous step</a>.
Per default the key file name should look like this: <code>AuthKey_XXXXXXXXXX.p8</code>. Because we use Docker in this case, we
will use the path to the key file on your filesystem to mount the file into the Docker container (we&#x27;ll get to this,
see the command below).</li><li><code>team_id</code>: This is the Team ID your Apple Developer account is associated with.<ul><li>See <a href="https://developer.apple.com/help/account/manage-your-team/locate-your-team-id/#:~:text=In%20the%20top%20navigation%20of,to%20view%20your%20Team%20ID." target="_blank" rel="noopener noreferrer">Locate your Team ID</a>
in the official Apple documentation.</li></ul></li><li><code>services_id</code>: This is <code>Services ID</code> you created in the <a href="#register-a-services-id">Register a Services ID</a> step. You
can always review this ID in the Apple Developer console:<ul><li>On <a href="https://developer.apple.com/account/resources" target="_blank" rel="noopener noreferrer">Certificates, Identifiers &amp; Profiles</a>, click <code>Identifiers</code> in the sidebar,
then select <code>Services IDs</code> from the dropdown menu on the right.</li><li>Find the relevant entry in the list (the required value is the value in the <code>Identifier</code> column).</li></ul></li><li><code>key_id</code>: This is the ID of the private key from the <a href="#create-key-and-download-key-file">previous step</a>.
The <code>XXXXXXXXXX</code> part of the default <code>AuthKey_XXXXXXXXXX.p8</code> filename is the key ID. You can
also review this ID in the Apple Developer console:<ul><li>On <a href="https://developer.apple.com/account/resources" target="_blank" rel="noopener noreferrer">Certificates, Identifiers &amp; Profiles</a>, click <code>Keys</code> in the sidebar,
then select <code>Services IDs</code>.</li><li>Select your key in the list.</li><li>The ID can be found under <code>View Key Details</code> &gt; <code>Key ID</code></li></ul></li></ul><p>As previously mentioned, we will mount the <code>private_key</code> to the container by mapping the path on your filesystem to
a path on the container filesystem, e.g. <code>~/Downloads/AuthKey_XXXXXXXXXX.p8:/tmp/AuthKey_XXXXXXXXXX.p8</code>.
From the command line, run (replace <code>&lt;...&gt;</code> placeholders with your data):</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">docker</span><span class="token plain"> run </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-v</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">key_file_on_host</span><span class="token operator">&gt;</span><span class="token plain">:</span><span class="token operator">&lt;</span><span class="token plain">key_file_in_container</span><span class="token operator">&gt;</span><span class="token plain"> ghcr.io/teamhanko/hanko siwa </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--private_key</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">key_file_in_container</span><span class="token operator">&gt;</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--team_id</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">your_team_id</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--services_id</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">your_services_id</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--key_id</span><span class="token plain"> </span><span class="token operator">&lt;</span><span class="token plain">your_key_id</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> client_secret.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The command will save the client secret in a file <code>client_secret.txt</code>.</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Secrets expire after 6 months and must be regenerated before the expiration.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="config-hanko">Configure Apple credentials with Hanko<a href="#config-hanko" class="hash-link" aria-label="Direct link to Configure Apple credentials with Hanko" title="Direct link to Configure Apple credentials with Hanko">​</a></h2><p>Next, you need to configure your Apple credentials with Hanko. Configuration differs depending on whether you
use Hanko Cloud or self-host the Hanko API:</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Hanko Cloud</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Self-hosted</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>When using Hanko Cloud, configure third party settings using the Hanko Cloud Console:</p><ul><li>Sign in to <a href="https://cloud.hanko.io" target="_blank" rel="noopener noreferrer">cloud.hanko.io</a>.</li><li>Select your <code>Organization</code>.</li><li>Select your <code>Project</code>.</li><li>In the left sidebar, click <code>Settings</code>, then select <code>Identity providers</code>.</li><li>Under <code>Identity provider settings</code> configure the following:<ul><li><code>Error redirect URL</code>: This is a URL in your frontend the Hanko API redirects to if an error occurs during third
party sign-in. When <a href="#frontend-integration">using the <code>hanko-elements</code> web components</a> it should be the URL of the
page that embeds the web component such that errors can be processed properly by the web component.</li><li><code>Allowed redirect URL</code>: This is a URL in your frontend the Hanko API is allowed to redirect to after third party
authentication was successful. When <a href="#frontend-integration">using the <code>hanko-elements</code> web components</a>, it should be
the URL of the page that embeds the web component.<ul><li><em><strong>Note</strong></em>: supports wildcard matching through globbing:<ul><li><code>https://*.example.com</code> will allow <code>https://foo.example.com</code> and <code>https://bar.example.com</code> to be accepted.</li><li><code>https://foo.example.com/*</code> will match <code>https://foo.example.com/page1</code>
and <code>https://foo.example.com/page2</code>.</li><li><code>**</code> acts as a &quot;super&quot;-wildcard/match-all.</li></ul></li></ul></li></ul></li><li>Find and expand the <code>Apple</code> provider panel in the <code>Providers</code> list.</li><li>Enable the provider by clicking the toggle switch.</li><li>Enter your <a href="#register-service"><code>Services ID</code></a> and client <a href="#generate-secret"><code>Secret</code></a>.</li><li>Click <code>Save</code>.</li></ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>When self-hosting you need to adjust your backend
<a href="https://github.com/teamhanko/hanko/blob/main/backend/config/config.yaml" target="_blank" rel="noopener noreferrer">configuration file</a>. You must provide
the following data:</p><ul><li>your provider <a href="#redirect-url"><code>redirect_url</code></a></li><li>your <code>client ID</code>, which in this case is your <a href="#configure-service"><code>Services ID</code></a></li><li>your client <a href="#generate-secret"><code>secret</code></a></li><li>an <code>error_redirect_url</code>: This is a URL in your frontend the Hanko API redirects to if an error occurs during third
party sign-in. When <a href="#frontend-integration">using the <code>hanko-elements</code> web components</a>, it should be the URL of the
page that embeds the web component such that errors can be processed properly by the web component.</li><li>an <code>allowed_redirect_url</code>: This is a URL in your frontend the Hanko API is allowed to redirect to after third
party sign-in was successful. When <a href="#frontend-integration">using the <code>hanko-elements</code> web components</a>, it should be
the URL of the page that embeds the web component.<ul><li><em><strong>Note</strong></em>: supports wildcard matching through globbing:<ul><li><code>https://*.example.com</code> will allow <code>https://foo.example.com</code> and <code>https://bar.example.com</code> to be accepted.</li><li><code>https://foo.example.com/*</code> will match <code>https://foo.example.com/page1</code>
and <code>https://foo.example.com/page2</code>.</li><li><code>**</code> acts as a &quot;super&quot;-wildcard/match-all.</li></ul></li></ul></li></ul><p>Open up your configuration file and add the following:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">config.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">third_party</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># You do not have to add this URL to the &#x27;allowed_redirect_urls&#x27;, it is automatically included when</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># validating redirect URLs.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># NOTE: URLs MUST NOT have trailing slash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">error_redirect_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;your_error_redirect_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># NOTE: URLs in the list MUST NOT have trailing slash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">allowed_redirect_urls</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> &lt;your_allowed_redirect_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">redirect_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;your_provider_redirect_url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">providers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">apple</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># this is your Apple Services ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">client_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;your_apple_client_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">secret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;your_apple_client_secret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="enable-login-in-your-frontend-app">Enable login in your frontend app<a href="#enable-login-in-your-frontend-app" class="hash-link" aria-label="Direct link to Enable login in your frontend app" title="Direct link to Enable login in your frontend app">​</a></h2><p>Frontend integration depends on whether you intend to use a pre-built UI as provided by the
<a href="https://www.npmjs.com/package/@teamhanko/hanko-elements" target="_blank" rel="noopener noreferrer"><code>@teamhanko/hanko-elements</code></a> package or prefer building
a custom UI using the <a href="https://www.npmjs.com/package/@teamhanko/hanko-frontend-sdk" target="_blank" rel="noopener noreferrer"><code>@teamhanko/hanko-frontend-sdk</code></a>.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Hanko Elements</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Hanko Frontend SDK</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>Depending on what framework your frontend uses, integrate the <code>&lt;hanko-auth&gt;</code> web component from the <code>hanko-elements</code>
package according to one of our <a href="/guides/frontend">frontend guides</a>. If everything was successful, the component should
now render a button for signing in with <code>Apple</code> on the login view.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Make sure to <a href="#config-hanko">configure</a> the page the web component is embedded on as your error redirect URL
as well as an allowed redirect URL.</p></div></div><p>On successful authentication with the third party provider, the backend issues a session cookie and the web component
continues the usual component flow on success. Errors that occur during third party
provider authentication are also picked up and displayed in the web component accordingly.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>When building your own UI, you can use the <code>@teamhanko/hanko-frontend-sdk</code> to initialize third party sign in.
Create a <a href="https://docs.hanko.io/jsdoc/hanko-frontend-sdk/Hanko.html" target="_blank" rel="noopener noreferrer"><code>Hanko</code> client</a> instance and call <code>thirdParty.auth</code>
with <code>apple</code> as your provider and the target URL in your frontend you want to redirect to
after successful third party authentication (must be <a href="#config-hanko">configured</a> as an allowed redirect URL).
Doing so first redirects you to the third party provider, where you then will be prompted
to authenticate and provide consent for the API to access your data.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Hanko</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;@teamhanko/hanko-frontend-sdk&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> hanko </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Hanko</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&lt;your_hanko_api_url&gt;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">signInWithApple</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">       </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> hanko</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">thirdParty</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">auth</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;apple&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&lt;your_redirect_url&gt;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// handle error</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>On successful authentication with the third party provider, the API redirects you to the given redirect URL. The
URL query includes a one time token that must be exchanged for a JWT. Use the <code>token.validate</code>
method on your client to validate the token:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv codeBlockLinesWithNumbering_o6Pm"><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Hanko</span><span class="token imports"> </span><span class="token imports punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;@teamhanko/hanko-frontend-sdk&quot;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> hanko </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name">Hanko</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&lt;your_hanko_api_url&gt;&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">async</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">onLoad</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">       </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">await</span><span class="token plain"> hanko</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">token</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">validate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)">// handle error</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain" style="display:inline-block"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// you should now have a JWT cookie set</span><span class="token plain"></span></span><br></span><span class="token-line codeLine_lJS_" style="color:#F8F8F2"><span class="codeLineNumber_Tfdd"></span><span class="codeLineContent_feaV"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>On success, the API issues a JWT which is then set by the SDK as a cookie (<code>hanko</code>). All other SDK methods can now
use the cookie to make authenticated requests to the API.</p></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>If you are self-hosting and your frontend application runs on a different domain than the Hanko API, make sure to</p><ul><li>enable session token propagation via header manually by setting <code>session.enable_auth_token_header</code> to <code>true</code> in your
configuration, so that session cookies can be set client-side.</li><li>include your frontend domain in the <code>server.public.cors.allowed_origins</code> in your
<a href="https://github.com/teamhanko/hanko/blob/main/backend/docs/Config.md" target="_blank" rel="noopener noreferrer">configuration</a>.</li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="on-using-apples-private-email-relay-service">On using Apple&#x27;s private email relay service<a href="#on-using-apples-private-email-relay-service" class="hash-link" aria-label="Direct link to On using Apple&#x27;s private email relay service" title="Direct link to On using Apple&#x27;s private email relay service">​</a></h2><p>Sign in with Apple gives allows users to
<a href="https://developer.apple.com/documentation/sign_in_with_apple/sign_in_with_apple_js/communicating_using_the_private_email_relay_service#overview" target="_blank" rel="noopener noreferrer">hide their original email address</a>
when authorizing your app during the authentication flow and instead use an anonymous, automatically generated
email address. Emails are then routed through Apples private relay email service. In order to
<a href="https://developer.apple.com/help/account/configure-app-capabilities/configure-private-email-relay-service" target="_blank" rel="noopener noreferrer">send email messages through the relay service</a>
to the users&#x27; personal inboxes (Hanko sends out passcodes for email verification and account
recovery), you&#x27;ll need to register your outbound email domains. All registered domains must create Sender Policy
Framework (SPF) DNS TXT records in order to transit Apple&#x27;s private mail relay.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>If a user signs up using <code>Sign in with Apple</code> and chooses to hide their real email address, then the
private relay address will become the primary email for the user. Should a user then choose to sign in with an email
address (and not via <code>Sign in with Apple</code>), then the private relay email address must be used, <em>not</em> the real email
address associated with her Apple account.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="register-domains">Register domains with Apple<a href="#register-domains" class="hash-link" aria-label="Direct link to Register domains with Apple" title="Direct link to Register domains with Apple">​</a></h3><ul><li>On <a href="https://developer.apple.com/account/resources" target="_blank" rel="noopener noreferrer">Certificates, Identifiers &amp; Profiles</a>, click <code>Services</code> in the
left sidebar.</li><li>In the <code>Sign in with Apple for Email Communication</code> panel, click <code>Configure</code>.</li><li>Next to the <code>Email Sources</code> heading, click the add (<code>+</code>) button.</li><li>In the <code>Register your email sources</code> modal, enter your <code>Domains and Subdomains</code> and/or specific <code>Email Addresses</code>.<ul><li>If you use Hanko Cloud and do <em>not</em> want to use a custom SMTP server, enter <code>hanko.io</code> in
the <code>Domains and Subdomains</code> input. You do not need to provide an SPF DNS record by yourself.</li><li>If you use Hanko Cloud and <em>do</em> want to use a <a href="/guides/social/apple?environment=cloud#configure-smtp">custom SMTP server</a>, enter your
custom domain in the <code>Domains and Subdomains</code> input. Remember to provide an SPF DNS record for your domain in order
to pass Apple&#x27;s SPF check.</li></ul></li><li>Click <code>Next</code>, then click <code>Register</code>.</li><li>Your domains should be listed in the <code>Email Sources</code> table. Emails are only relayed if the SPF check (see the <code>Status</code>
column) was successful.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-smtp">Configure SMTP with Hanko<a href="#configure-smtp" class="hash-link" aria-label="Direct link to Configure SMTP with Hanko" title="Direct link to Configure SMTP with Hanko">​</a></h3><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Hanko Cloud</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Self-hosted</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>If you use Hanko Cloud and are on a paid subscription tier you can configure your own SMTP server.</p><ul><li>Sign in to <a href="https://cloud.hanko.io" target="_blank" rel="noopener noreferrer">cloud.hanko.io</a>.</li><li>Select your <code>Organization</code>.</li><li>Select your <code>Project</code>.</li><li>In the left sidebar, click <code>Settings</code>, then select <code>SMTP</code>.</li><li>Enter your SMTP credentials and sender data.<ul><li>The domain of your <code>Sender email address</code> should be registered as an email source in the Apple developer
console to allow communication through Apple&#x27;s private relay service (see the <a href="#register-domains">previous step</a>).</li></ul></li><li>Click <code>Save</code>.</li></ul></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>If you are self-hosting, you need to edit your <a href="https://github.com/teamhanko/hanko/blob/main/backend/config/config.yaml" target="_blank" rel="noopener noreferrer">configuration file</a>.
Open the file and add the following (replace <code>&lt;...&gt;</code> placeholders with your data):</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">config.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">passcode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">email</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># The sender of emails sent to users.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">from_address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;your_from_address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># The sender name of emails sent to users.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">from_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;your_from_name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">smtp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;your_smtp_host</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;your_smtp_port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># Default: 465</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;your_smtp_user</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> &lt;your_smtp_password</span><span class="token punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/guides/social"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Social Login</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/guides/social/github"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">GitHub</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#access-your-apple-developer-account" class="table-of-contents__link toc-highlight">Access your Apple Developer account</a></li><li><a href="#register-an-app-id" class="table-of-contents__link toc-highlight">Register an App ID</a></li><li><a href="#register-service" class="table-of-contents__link toc-highlight">Register a Services ID</a></li><li><a href="#redirect-url" class="table-of-contents__link toc-highlight">Get your provider redirect URL</a></li><li><a href="#configure-service" class="table-of-contents__link toc-highlight">Configure your Services ID</a></li><li><a href="#create-key-and-download-key-file" class="table-of-contents__link toc-highlight">Create Key and download Key file</a></li><li><a href="#generate-secret" class="table-of-contents__link toc-highlight">Generate a client secret</a></li><li><a href="#config-hanko" class="table-of-contents__link toc-highlight">Configure Apple credentials with Hanko</a></li><li><a href="#enable-login-in-your-frontend-app" class="table-of-contents__link toc-highlight">Enable login in your frontend app</a></li><li><a href="#on-using-apples-private-email-relay-service" class="table-of-contents__link toc-highlight">On using Apple&#39;s private email relay service</a><ul><li><a href="#register-domains" class="table-of-contents__link toc-highlight">Register domains with Apple</a></li><li><a href="#configure-smtp" class="table-of-contents__link toc-highlight">Configure SMTP with Hanko</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.2855e3b5.js"></script>
<script src="/assets/js/main.33db7b23.js"></script>
</body>
</html>